export class RelatedQuery {
    constructor(resourceName, query) {
        this.resourceName = resourceName;
        this.query = query;
    }
    fields(field, ...fields) {
        const relatedFields = this.nestedFields(Array.isArray(field) ? field : [field, ...fields]);
        this.query.fields.push(...relatedFields);
        return this;
    }
    related(resourceName, callback = (related) => {
        this.query.fields.push([this.resourceName, resourceName].join("."));
        return related;
    }) {
        callback(new RelatedQuery([this.resourceName, resourceName].join("."), this.query));
        return this;
    }
    nestedFields(fields) {
        return fields.map((field) => [this.resourceName, field].join("."));
    }
}
